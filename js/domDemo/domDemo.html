<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>domDemo</title>
	<style type="text/css" rel="stylesheet">
		#container{
			position:relative;
			height:477px;
			margin:0 auto;
			border-right:1px solid #ccc;
			border-bottom:1px solid #ccc;
			overflow:hidden;
		}
		#container img{
			position:absolute;
			display:block;
			left:0;
			border-left:1px solid #ccc;
		}
	</style>
</head>
<body>
	<h1>手机大卖场</h1>
	<div id="container">
		<img src="images/door1.png" alt="1080P神器" title="1080P神器">
		<img src="images/door2.png" alt="5.5寸四核" title="5.5寸四核">
		<img src="images/door3.png" alt="四核5寸" title="四核5寸">
		<img src="images/door4.png" alt="5.7寸机皇" title="5.7寸机皇">
	</div>
	<script type="text/javascript" charset="utf-8" async defer>
 
 		window.onload = function(){
 			//获得容器变量
 			var box = document.getElementById('container');
 			//获得图片NodeList对象集合
 			var imgs = box.getElementsByTagName('img');
 			// 单张图片的宽度
 			var imgWidth = imgs[0].offsetWidth;
 			console.log("offsetWidth:"+imgWidth);
 			console.log("width:"+imgs[0].width);
 			// 设置掩藏门体露出的宽度
 			var exposeWidth = 160;
 			// 设置容器的总宽度
 			var boxWidth = imgWidth + (imgs.length - 1) * exposeWidth;
 			box.style.width = boxWidth + "px";


 			// 设置每道门的初始位置
 			setPosition();
 			function setPosition(){
 				for(var i=1;i<imgs.length;i++){
 				imgs[i].style.left = imgWidth + exposeWidth * (i-1) + "px";
 				}
 			}
 			
 			// 计算每道门打开时应移动的距离
 			var move = imgWidth - exposeWidth;

 			// 为每道门绑定事件
 			// for(var i = 0;i<imgs.length;i++){
 			// 	// 使用立即调用的函数表达式，为了获取不同的i值
 			// 	(function(i){
 			// 		imgs[i].onmouseover = function(){
 			// 			// 先将每道门复位
 			// 			setPosition();
 			// 			// 打开门
 			// 			for(var j = 1;j<=i;j++){
 			// 				imgs[j].style.left = parseInt(imgs[j].style.left,10) - move +"px";
 			// 			}
 			// 		}
 			// 	})(i);
 			// 	};
			for(var i = 0;i<imgs.length;i++){
		
				imgs[i].index=i;
				imgs[i].onclick = function(){
					
					open(this.index);
				}
		
			};
 			var open = function (i){
 				setPosition();
 				for(var j = 1;j<i;j++){
					imgs[j].style.left = parseInt(imgs[j].style.left,10) - move +"px";
					console.log("j="+j);
				}
 			}
 		}
	</script>		
	
</body>
</html>