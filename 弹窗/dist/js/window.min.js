define(["widget","jquery","jqueryUI"],function(t,n,i){function e(){this.cfg={width:500,height:300,title:"系统消息",content:"",hasCloseBtn:!1,hanMask:!0,isDraggable:!0,dragHandle:null,skinClassName:null,text4AlertBtn:"确定",text4CancelBtn:"取消",handler4AlertBtn:null,handler4CloseBtn:null,handler4ConfirmBtn:null,handler4CancelBtn:null,text4PromptBtn:"确定",isPromptInputPassword:!1,defaultValue4PromptInput:!1,maxlength4PromptInput:10,handler4PromptBtn:null}}return e.prototype=n.extend({},new t.Widget,{renderUI:function(){var t="";switch(this.cfg.winType){case"alert":t='<input type="button" value="'+this.cfg.text4AlertBtn+'" class="window_alertBtn">';break;case"confirm":t='<input type="button" value="'+this.cfg.text4ConfirmBtn+'" class="window_confirmBtn"><input type="button" value="'+this.cfg.text4CancelBtn+'" class="window_cancelBtn">';break;case"prompt":this.cfg.content+='<p class="window_promptInputWrapper"><input type="'+(this.cfg.isPromptInputPassword?"password":"text")+'" value="'+this.cfg.defaultValue4PromptInput+'" maxlength="'+this.cfg.maxlength4PromptInput+'" class="window_promptInput"></p>',t='<input type="button" value="'+this.cfg.text4PromptBtn+' " class="window_promptBtn"><input type="button" value="'+this.cfg.text4CancelBtn+'" class="window_cancelBtn">'}this.boudingBox=n('<div class="window_boundingBox"><div class="window_body">'+this.cfg.content+"</div></div>"),"common"!=this.cfg.winType&&(this.boudingBox.prepend('<div class="window_header">'+this.cfg.title+"</div>"),this.boudingBox.append('<div class="window_footer">'+t+"</div>")),this.cfg.hanMask&&(this._mask=n('<div class="window_mask"></div>'),this._mask.appendTo("body")),this.cfg.hasCloseBtn&&this.boudingBox.append('<span class="window_closeBtn">X</span>'),this.boudingBox.appendTo(document.body),this._promptInput=this.boudingBox.find(".window_promptInput")},bindUI:function(){var t=this;this.boudingBox.delegate(".window_alertBtn","click",function(){t.fire("alert"),t.destroy()}).delegate(".window_closeBtn","click",function(){t.fire("close"),t.destroy()}).delegate(".window_confirmBtn","click",function(){t.fire("confirm"),t.destroy()}).delegate(".window_cancelBtn","click",function(){t.fire("cancel"),t.destroy()}).delegate(".window_promptBtn","click",function(){t.fire("prompt",t._promptInput.val()),t.destroy()}),this.cfg.handler4AlertBtn&&this.on("alert",this.cfg.handler4AlertBtn),this.cfg.handler4CloseBtn&&this.on("close",this.cfg.handler4CloseBtn),this.cfg.handler4PromptBtn&&this.on("prompt",this.cfg.handler4PromptBtn)},syncUI:function(){this.boudingBox.css({width:this.cfg.width+"px",height:this.cfg.height+"px",left:(this.cfg.x||(window.innerWidth-this.cfg.width)/2)+"px",top:(this.cfg.y||(window.innerHeight-this.cfg.height)/2)+"px"}),this.cfg.skinClassName&&this.boudingBox.addClass(this.cfg.skinClassName),this.cfg.isDraggable&&(this.cfg.dragHandle?this.boudingBox.draggable({handle:this.cfg.dragHandle}):this.boudingBox.draggable())},destructor:function(){this._mask&&this._mask.remove()},alert:function(t){return n.extend(this.cfg,t,{winType:"alert"}),this.render(),this},confirm:function(t){return n.extend(this.cfg,t,{winType:"confirm"}),this.render(),this},prompt:function(t){return n.extend(this.cfg,t,{winType:"prompt"}),this.render(),this._promptInput.focus(),this},common:function(t){return n.extend(this.cfg,t,{winType:"common"}),this.render(),this}}),{Window:e}});